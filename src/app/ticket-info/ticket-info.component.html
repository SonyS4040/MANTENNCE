<div class="detail-section">
  <h3>معلومات العميل والمهندس</h3>
  <div class="info-grid">
    <div class="info-item"><strong>اسم العميل:</strong><p>{{ ticket.customer_name }}</p></div>
    <div class="info-item"><strong>رقم الهاتف:</strong><p>{{ ticket.customer_phone }}</p></div>
    <div class="info-item"><strong>المهندس المسؤول:</strong><p>{{ ticket.engineers?.name || 'لم يتم التعيين بعد' }}</p></div>
    <div class="info-item full-width"><strong>عنوان المنشأة:</strong><p>{{ ticket.customer_address }}</p></div>
  </div>
</div>

<div class="detail-section">
  <h3>معلومات الجهاز والعطل</h3>
  <div class="info-grid">
    <div class="info-item"><strong>نوع الجهاز:</strong><p>{{ ticket.device_type }}</p></div>
    <div class="info-item"><strong>الرقم التسلسلي:</strong><p>{{ ticket.serial_number || 'غير متوفر' }}</p></div>
    <div class="info-item full-width"><strong>وصف العطل:</strong><p class="description">{{ ticket.fault_description }}</p></div>
    <div class="info-item"><strong>تاريخ الإنشاء:</strong><p>{{ ticket.created_at | date:'yyyy/MM/dd hh:mm a' }}</p></div>
  </div>
</div>

@if (ticket.attachment_url) {
  <div class="detail-section">
    <h3>المرفقات</h3>
    <a [href]="ticket.attachment_url" target="_blank" rel="noopener noreferrer" class="attachment-link">عرض المرفق</a>
  </div>
}

@if (ticket.repair_video_url) {
  <div class="detail-section">
    <h3>فيديو بعد الإصلاح</h3>
    <video controls width="100%">
      <source [src]="ticket.repair_video_url" type="video/mp4">
      متصفحك لا يدعم عرض الفيديو.
    </video>
  </div>
}