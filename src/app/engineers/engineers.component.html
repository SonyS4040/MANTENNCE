<div class="engineers-container">
  <h2>إدارة مهندسي الصيانة</h2>

  <div class="add-engineer-form">
    <h3>إضافة مهندس جديد</h3>
    <form [formGroup]="addEngineerForm" (ngSubmit)="addEngineer()">
      <div class="form-group">
        <label for="name">اسم المهندس</label>
        <input type="text" id="name" formControlName="name" placeholder="أدخل اسم المهندس الجديد">
        @if (addEngineerForm.get('name')?.invalid && addEngineerForm.get('name')?.touched) {
          <div class="error">حقل الاسم مطلوب.</div>
        }
      </div>
      <button type="submit" class="submit-btn" [disabled]="isSubmitting || addEngineerForm.invalid">
        @if (isSubmitting) {
          <span>جاري الإضافة...</span>
        } @else {
          <span>إضافة مهندس</span>
        }
      </button>
    </form>
  </div>

  <div class="engineers-list">
    <h3>قائمة المهندسين الحاليين</h3>
    @if (isLoading) {
      <p>جاري تحميل القائمة...</p>
    } @else if (error) {
      <div class="error-message">{{ error }}</div>
    } @else if (engineers().length === 0) {
      <p>لا يوجد مهندسون مسجلون حالياً.</p>
    } @else {
      <table>
        <thead>
          <tr>
            <th>اسم المهندس</th>
            <th>الإجراءات</th>
          </tr>
        </thead>
        <tbody>
          @for (engineer of engineers(); track engineer.id) {
            <tr>
              <td>{{ engineer.name }}</td>
              <td>
                <button (click)="deleteEngineer(engineer.id, engineer.name)" class="delete-btn">حذف</button>
              </td>
            </tr>
          }
        </tbody>
      </table>
    }
  </div>
</div>